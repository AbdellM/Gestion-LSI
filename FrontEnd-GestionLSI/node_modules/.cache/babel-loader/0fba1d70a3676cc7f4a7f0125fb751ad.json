{"remainingRequest":"C:\\Users\\Lenovo\\Desktop\\Gestion-LSI\\test\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Lenovo\\Desktop\\Gestion-LSI\\test\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Lenovo\\Desktop\\Gestion-LSI\\test\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\Lenovo\\Desktop\\Gestion-LSI\\test\\src\\store\\index.js","mtime":1624133118319},{"path":"C:\\Users\\Lenovo\\Desktop\\Gestion-LSI\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Lenovo\\Desktop\\Gestion-LSI\\test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Lenovo\\Desktop\\Gestion-LSI\\test\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGNyZWF0ZVN0b3JlIH0gZnJvbSAidnVleCI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSAnaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FwaS9hdXRoLyc7CmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVN0b3JlKHsKICBzdGF0ZTogewogICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NfdG9rZW4nKSB8fCBudWxsLAogICAgcm9sZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3JvbGUnKSB8fCBudWxsCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRSb2xlOiBmdW5jdGlvbiBnZXRSb2xlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5yb2xlICE9IG51bGw7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHJldHJpZXZlVG9rZW46IGZ1bmN0aW9uIHJldHJpZXZlVG9rZW4oc3RhdGUsIHRva2VuKSB7CiAgICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgICB9LAogICAgZGVzdHJveVRva2VuOiBmdW5jdGlvbiBkZXN0cm95VG9rZW4oc3RhdGUpIHsKICAgICAgc3RhdGUudG9rZW4gPSBudWxsOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgcmV0cmlldmVUb2tlbjogZnVuY3Rpb24gcmV0cmlldmVUb2tlbihjb250ZXh0LCBjcmVkZW50aWFscykgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGF4aW9zLnBvc3QoJy9sb2dpbicsIHsKICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiBjcmVkZW50aWFscy5wYXNzd29yZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgdG9rZW4gPSByZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbjsKICAgICAgICAgIHZhciByb2xlID0gcmVzcG9uc2UuZGF0YS51c2VyLnJvbGU7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzX3Rva2VuJywgdG9rZW4pOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JvbGUnLCByb2xlKTsKICAgICAgICAgIGNvbnRleHQuY29tbWl0KCdyZXRyaWV2ZVRva2VuJywgdG9rZW4pOwogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vZHVsZXM6IHt9Cn0pOw=="},{"version":3,"sources":["C:/Users/Lenovo/Desktop/Gestion-LSI/test/src/store/index.js"],"names":["createStore","axios","defaults","baseURL","state","token","localStorage","getItem","role","getters","getRole","mutations","retrieveToken","destroyToken","actions","context","credentials","Promise","resolve","reject","post","email","password","then","response","data","access_token","user","setItem","commit","console","log","catch","error","modules"],"mappings":";AAAA,SAASA,WAAT,QAA4B,MAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAyB,iCAAzB;AAEA,eAAeH,WAAW,CAAC;AACzBI,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,cAArB,KAAwC,IAD1C;AAELC,IAAAA,IAAI,EAAEF,YAAY,CAACC,OAAb,CAAqB,MAArB,KAAgC;AAFjC,GADkB;AAKzBE,EAAAA,OAAO,EAAE;AACPC,IAAAA,OADO,mBACCN,KADD,EACO;AACZ,aAAOA,KAAK,CAACI,IAAN,IAAc,IAArB;AACD;AAHM,GALgB;AAUzBG,EAAAA,SAAS,EAAE;AACTC,IAAAA,aADS,yBACKR,KADL,EACYC,KADZ,EACmB;AAC1BD,MAAAA,KAAK,CAACC,KAAN,GAAcA,KAAd;AACD,KAHQ;AAITQ,IAAAA,YAJS,wBAIIT,KAJJ,EAIW;AAClBA,MAAAA,KAAK,CAACC,KAAN,GAAc,IAAd;AACD;AANQ,GAVc;AAkBzBS,EAAAA,OAAO,EAAE;AACPF,IAAAA,aADO,yBACOG,OADP,EACgBC,WADhB,EAC6B;AAClC,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtClB,QAAAA,KAAK,CAACmB,IAAN,CAAW,QAAX,EAAqB;AACnBC,UAAAA,KAAK,EAAEL,WAAW,CAACK,KADA;AAEnBC,UAAAA,QAAQ,EAAEN,WAAW,CAACM;AAFH,SAArB,EAIGC,IAJH,CAIQ,UAAAC,QAAQ,EAAI;AAChB,cAAMnB,KAAK,GAAGmB,QAAQ,CAACC,IAAT,CAAcC,YAA5B;AACA,cAAMlB,IAAI,GAAGgB,QAAQ,CAACC,IAAT,CAAcE,IAAd,CAAmBnB,IAAhC;AAEAF,UAAAA,YAAY,CAACsB,OAAb,CAAqB,cAArB,EAAqCvB,KAArC;AACAC,UAAAA,YAAY,CAACsB,OAAb,CAAqB,MAArB,EAA6BpB,IAA7B;AACAO,UAAAA,OAAO,CAACc,MAAR,CAAe,eAAf,EAAgCxB,KAAhC;AACAyB,UAAAA,OAAO,CAACC,GAAR,CAAYP,QAAZ;AACAN,UAAAA,OAAO,CAACM,QAAD,CAAP;AACD,SAbH,EAcGQ,KAdH,CAcS,UAAAC,KAAK,EAAI;AACdH,UAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACAd,UAAAA,MAAM,CAACc,KAAD,CAAN;AACD,SAjBH;AAkBD,OAnBM,CAAP;AAoBD;AAtBM,GAlBgB;AA0CzBC,EAAAA,OAAO,EAAE;AA1CgB,CAAD,CAA1B","sourcesContent":["import { createStore } from \"vuex\";\r\nimport axios from \"axios\";\r\n\r\n\r\naxios.defaults.baseURL = 'http://127.0.0.1:8000/api/auth/'\r\n\r\nexport default createStore({\r\n  state: {\r\n    token: localStorage.getItem('access_token') || null,\r\n    role: localStorage.getItem('role') || null,\r\n  },\r\n  getters: {\r\n    getRole(state){\r\n      return state.role != null;\r\n    }\r\n  },\r\n  mutations: {\r\n    retrieveToken(state, token) {\r\n      state.token = token\r\n    },\r\n    destroyToken(state) {\r\n      state.token = null\r\n    },\r\n  },\r\n  actions: {\r\n    retrieveToken(context, credentials) {\r\n      return new Promise((resolve, reject) => {\r\n        axios.post('/login', {\r\n          email: credentials.email,\r\n          password: credentials.password,\r\n        })\r\n          .then(response => {\r\n            const token = response.data.access_token\r\n            const role = response.data.user.role\r\n\r\n            localStorage.setItem('access_token', token)\r\n            localStorage.setItem('role', role)\r\n            context.commit('retrieveToken', token)\r\n            console.log(response);\r\n            resolve(response)\r\n          })\r\n          .catch(error => {\r\n            console.log(error)\r\n            reject(error)\r\n          })\r\n      });\r\n    },\r\n  },\r\n  modules: {},\r\n});\r\n"]}]}